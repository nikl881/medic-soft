{% extends 'base.html.twig' %}

{% block title %}MedicSoft | Patients {% endblock %}

{% block main %}
    <div class="container">
    <div class="row">
        <div class="col-10">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center mb-3">
                <h1 class="text-center"><i class="fas fa-user"></i> List of patients
                    - {{ app.user.title }} {{ app.user.lastName }}</h1>
            </div>
        </div>
        <div class="col-2">
            <div class="btn btn-success mb-3 float-right" data-toggle="modal" data-target="#exampleModal1"><i
                        class="fas fa-plus"></i> Add patient
            </div>
        </div>
    </div>
    <table class="table table-striped border-secondary">
        <thead>
        <tr>
            <th scope="col">{{ knp_pagination_sortable(patients, 'Name', 'v.name') }} <i
                        class="fas fa-sort"></i></th>
            <th scope="col">{{ knp_pagination_sortable(patients, 'Last name', 'v.lastName') }} <i
                        class="fas fa-sort"></i></th>
            <th scope="col">Email</th>
            <th scope="col">Date of birth</th>
            <th scope="col">Insurance number</th>
            <th scope="col">Insurance company</th>
            <th scope="col">Phone number</th>
            <th scope="col">Primary physician</th>
            <th scope="col">Details</th>
        </tr>
        </thead>
        <tbody>
        {% for patient in patients %}
            <tr>
                <td>{{ patient.name }}</td>
                <td>{{ patient.lastName }}</td>
                <td>{{ patient.email }}</td>
                <td>{{ patient.birthdate|date("d-m-Y") }}</td>
                <td>{{ patient.insuranceNumber }}</td>
                <td>{{ patient.insuranceCompany }}</td>
                <td>{{ patient.phoneNumber }}</td>
                <td>{{ patient.user.lastName }}, {{ patient.user.name|first }}</td>
                <td><a href="{{ path('patient_details',{'patient':patient.id}) }}"><i class="fas fa-edit"></i></a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <div class="row">
        <div class="col-2">
            <div class="navigation">
                {{ knp_pagination_render(patients) }}
            </div>
        </div>
        <div class="col-9">
        </div>
        <div class="col-1">
            <strong>Total:</strong> <i>{{ patients.getTotalItemCount }}</i>
        </div>
    </div>
    <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"><i class="fas fa-user"></i> Add patient
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{ form_start(form) }}
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="myclass">Save</button>
                    </div>
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>


{#    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#addMyModal">Open Modal</button>#}
{#    <div class="modal fade" id="addMyModal" role="dialog">#}
{#        <div class="modal-dialog">#}
{#            <div class="modal-content">#}
{#                <div class="modal-header">#}
{#                    <button type="button" class="close" data-dismiss="modal">&times;</button>#}
{#                    <h4 class="modal-title">Add patient</h4>#}
{#                </div>#}
{#                <div class="modal-body">#}

{#                    <form role="form" id="newModalForm">#}
{#                        <div class="form-group">#}



{#                            <label class="control-label col-md-3" for="email">Last name:</label>#}
{#                            <div class="col-md-9">#}
{#                                <input type="text" class="form-control" id="pName" name="pName"#}
{#                                       placeholder="Enter patient name" require/>#}
{#                            </div>#}
{#                        </div>#}
{#                        <div class="form-group">#}
{#                            <label class="control-label col-md-3" for="email">Last name:</label>#}
{#                            <div class="col-md-9">#}
{#                                <input type="text" class="form-control" id="action" name="action"#}
{#                                       placeholder="Enter patient name" require>#}
{#                            </div>#}
{#                        </div>#}
{#                        #}
{#                        #}
{#                        #}
{#                        <div class="modal-footer">#}
{#                            <button type="submit" class="btn btn-success" id="btnSaveIt">Save</button>#}
{#                            <button type="button" class="btn btn-default" id="btnCloseIt" data-dismiss="modal">Close#}
{#                            </button>#}
{#                        </div>#}

{#                    </form>#}

{#                </div>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}

    {% block customjavascripts %}
        <script>

            $('.myclass li.active .short-text:contains("someText")').click();

        </script>
        {% endblock %}


{#    {% block customjavascripts %}#}
{#        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>#}
{#        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.14.0/jquery.validate.min.js"></script>#}
{#        <script>#}
{#            $(function () {#}
{#                $("#newModalForm").validate({#}
{#                    rules: {#}
{#                        pName: {#}
{#                            required: true,#}
{#                            minlength: 8#}
{#                        },#}
{#                        action: "required"#}
{#                    },#}
{#                    messages: {#}
{#                        pName: {#}
{#                            required: "Please enter some data",#}
{#                            minlength: "Your data must be at least 8 characters"#}
{#                        },#}
{#                        action: "Please provide some data"#}
{#                    }#}
{#                });#}
{#            });#}
{#        </script>#}
{#    {% endblock %}#}
{% endblock %}